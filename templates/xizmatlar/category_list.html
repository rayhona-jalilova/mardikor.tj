{% load static %}

<!DOCTYPE html>
<html lang="tj">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ sarlavha }}</title>
    <link rel="stylesheet" href="{% static 'xizmatlar/xizmatlar_royxati.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="light-mode"> <!-- light-mode bilan boshlanadi -->
    
    <header>
        <div class="gif-logo">
            <a href="{% url 'xizmatlar_royxati'%}"><img src="{% static 'xizmatlar/images/ChatGPT Image 7 –º–∞—è 2025 –≥., 10_31_34.png' %}" alt="Logo" class="navbar-gif"></a>
        </div>
        
        <div class="nav-links">
            <a href="{% url 'home' %}">–ê—Å–æ—Å”£</a>
            <a href="{% url 'about' %}">–î–∞—Ä –±–æ—Ä–∞–∏ –º–æ</a>
        </div>
        
        <h1>{{ sarlavha }}</h1>

        {% if user.is_authenticated %}
        <div class="user-info">
            <p>–°–∞–ª–æ–º, {{ user.username }}</p>
            <form method="post" action="{% url 'logout' %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" style="background: none; border: none; color: blue; cursor: pointer;">
                    –ë–∞—Ä–æ–º–∞–¥
                </button>
            </form>
        </div>
        {% else %}
        <div class="auth-links">
            <a href="{% url 'login' %}">–î–∞—Ä–æ–º–∞–¥–∞–Ω</a> | <a href="{% url 'signup' %}">–ê–∑ —Ä”Ø–π—Ö–∞—Ç –≥—É–∑–∞—à—Ç–∞–Ω</a>
        </div>
        {% endif %}

        <form method="get" action="" class="search-form">
            <input type="text" name="qidiruv" placeholder="–•–∏–∑–º–∞—Ç—Ä–æ “∑—É—Å—Ç—É“∑”Ø –∫—É–Ω..." value="{{ qidiruv }}">
            <button type="submit">üîç</button>
        </form>

        <button id="mode-toggle">üåô/‚òÄÔ∏è</button>
    </header>

    <main>
        <h2>{{ sarlavha }} —Ä—û–π—Ö–∞—Ç–∏</h2>

        {% if xizmatlar %}
        <ul class="service-list">
            {% for xizmat in xizmatlar %}
            <li class="service-card">
                <a href="{% url 'service_detail' pk=xizmat.pk %}">
                    <h3>{{ xizmat.nomi }}</h3>
                    <p>{{ xizmat.tavsif }}</p>
                    <p>–ù–∞—Ä—Ö: {{ xizmat.narx }} —Å–æ–º–æ–Ω”£</p>
                </a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>“≤–µ—á —Ö–∏–∑–º–∞—Ç –º–∞–≤“∑—É–¥ –Ω–µ—Å—Ç. –ò–ª—Ç–∏–º–æ—Å, –∫–µ–π–∏–Ω—Ä–æ “õ–∞–π—Ç–∞ –∫—û—Ä–∏—à–Ω–∏ —û–π–ª–∞–± –∫—û—Ä–∏–Ω–≥.</p>
        {% endif %}
    </main>

    <footer>
        <p>&copy; 2025 Mardikor.tj | –ë–∞—Ä—á–∞—Å–∞–±</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const modeToggleButton = document.getElementById('mode-toggle');
            const body = document.body;
    
            modeToggleButton.innerText = body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
    
            modeToggleButton.addEventListener('click', function () {
                if (body.classList.contains('dark-mode')) {
                    body.classList.remove('dark-mode');
                    body.classList.add('light-mode');
                    modeToggleButton.innerText = 'üåô';
                } else {
                    body.classList.remove('light-mode');
                    body.classList.add('dark-mode');
                    modeToggleButton.innerText = '‚òÄÔ∏è';
                }
            });
        });
    </script>

</body>
</html>
