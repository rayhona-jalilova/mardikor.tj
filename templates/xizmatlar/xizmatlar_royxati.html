{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="tj">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—û–π—Ö–∞—Ç–∏ —Ö–∏–∑–º–∞—Ç“≥–æ</title>
    <link rel="stylesheet" href="{% static 'xizmatlar/xizmatlar_royxati.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

</head>
<body class="light-mode"> <!-- light-mode bilan boshlanadi -->
    
    
    <header>
        <div class="gif-logo">
            <a href="{% url 'xizmatlar_royxati'%}">  <img src="{% static 'xizmatlar/images/ChatGPT Image 7 –º–∞—è 2025 –≥., 10_31_34.png' %}" alt="Logo" class="navbar-gif"></a>
        </div>
        
        <div class="nav-links">
            <a href="{% url 'home' %}" >–ê—Å–æ—Å”£</a>
            <a href="{% url 'about' %}" >–î–∞—Ä –±–æ—Ä–∞–∏ –º–æ</a>
        
        </div>
        <h1>–†—û–π—Ö–∞—Ç–∏ —Ö–∏–∑–º–∞—Ç“≥–æ</h1>


        {% if user.is_authenticated %}
        
        <div class="user-info">
            <p>–°–∞–ª–æ–º, {{ user.username }}</p>
            <form method="post" action="{% url 'logout' %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" style="background: none; border: none; color: blue; cursor: pointer;">
                    –ë–∞—Ä–æ–º–∞–¥
                </button>
            </form>
        </div>
        {% else %}
            <div class="auth-links">
                <a href="{% url 'login' %}">–î–∞—Ä–æ–º–∞–¥–∞–Ω</a> | <a href="{% url 'signup' %}">–ê–∑ —Ä”Ø–π—Ö–∞—Ç –≥—É–∑–∞—à—Ç–∞–Ω</a>
            </div>
        {% endif %}
        <!-- Contact Button -->
        <form method="get" action="" class="search-form">
            <select name="nohiya" class="xizmat-nohiya" required >
                <option value="">–ù–æ“≥–∏—è—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥</option>
        
                <!-- –î—É—à–∞–Ω–±–µ -->
                <option value="–ò—Å–º–æ–∏–ª–∏ –°–æ–º–æ–Ω”£">–ò—Å–º–æ–∏–ª–∏ –°–æ–º–æ–Ω”£</option>
                <option value="–®–æ“≥–º–∞–Ω—Å—É—Ä">–®–æ“≥–º–∞–Ω—Å—É—Ä</option>
                <option value="–§–∏—Ä–¥–∞–≤—Å”£">–§–∏—Ä–¥–∞–≤—Å”£</option>
                <option value="–°–∏–Ω–æ">–°–∏–Ω–æ</option>
        
                <!-- –í–ú–ö–ë -->
                <option value="–•–æ—Ä—É“ì">–•–æ—Ä—É“ì</option>
                <option value="–í–∞–Ω“∑">–í–∞–Ω“∑</option>
                <option value="–î–∞—Ä–≤–æ–∑">–î–∞—Ä–≤–æ–∑</option>
                <option value="–ò—à–∫–æ—à–∏–º">–ò—à–∫–æ—à–∏–º</option>
                <option value="–ú—É—Ä“ì–æ–±">–ú—É—Ä“ì–æ–±</option>
                <option value="–†–æ—à—Ç“õ–∞–ª—ä–∞">–†–æ—à—Ç“õ–∞–ª—ä–∞</option>
                <option value="–†”Ø—à–æ–Ω">–†”Ø—à–æ–Ω</option>
                <option value="–®—É“ì–Ω–æ–Ω">–®—É“ì–Ω–æ–Ω</option>
        
                <!-- –í–∏–ª–æ—è—Ç–∏ –°—É“ì–¥ -->
                <option value="–•—É“∑–∞–Ω–¥">–•—É“∑–∞–Ω–¥</option>
                <option value="–ê—à—Ç">–ê—à—Ç</option>
                <option value="–ë–æ–±–æ“∑–æ–Ω “í–∞—Ñ—É—Ä–æ–≤">–ë–æ–±–æ“∑–æ–Ω “í–∞—Ñ—É—Ä–æ–≤</option>
                <option value="–î–µ–≤–∞—à—Ç–∏—á">–î–µ–≤–∞—à—Ç–∏—á</option>
                <option value="“∂–∞–±–±–æ—Ä –†–∞—Å—É–ª–æ–≤">“∂–∞–±–±–æ—Ä –†–∞—Å—É–ª–æ–≤</option>
                <option value="–ó–∞—Ñ–∞—Ä–æ–±–æ–¥">–ó–∞—Ñ–∞—Ä–æ–±–æ–¥</option>
                <option value="–ò—Å—Ç–∞—Ä–∞–≤—à–∞–Ω">–ò—Å—Ç–∞—Ä–∞–≤—à–∞–Ω</option>
                <option value="–ò—Å—Ñ–∞—Ä–∞">–ò—Å—Ñ–∞—Ä–∞</option>
                <option value="–ö–æ–Ω–∏–±–æ–¥–æ–º">–ö–æ–Ω–∏–±–æ–¥–æ–º</option>
                <option value="–ú–∞—Å—Ç—á–æ“≥">–ú–∞—Å—Ç—á–æ“≥</option>
                <option value="–ü–∞–Ω“∑–∞–∫–µ–Ω—Ç">–ü–∞–Ω“∑–∞–∫–µ–Ω—Ç</option>
                <option value="–°–ø–∏—Ç–∞–º–µ–Ω">–°–ø–∏—Ç–∞–º–µ–Ω</option>
                <option value="–®–∞“≥—Ä–∏—Å—Ç–æ–Ω">–®–∞“≥—Ä–∏—Å—Ç–æ–Ω</option>
        
                <!-- –í–∏–ª–æ—è—Ç–∏ –•–∞—Ç–ª–æ–Ω -->
                <option value="–ë–æ—Ö—Ç–∞—Ä">–ë–æ—Ö—Ç–∞—Ä</option>
                <option value="–ö”Ø–ª–æ–±">–ö”Ø–ª–æ–±</option>
                <option value="–ê–±–¥—É—Ä–∞“≥–º–æ–Ω–∏ “∂–æ–º”£">–ê–±–¥—É—Ä–∞“≥–º–æ–Ω–∏ “∂–æ–º”£</option>
                <option value="–ë–∞–ª“∑—É–≤–æ–Ω">–ë–∞–ª“∑—É–≤–æ–Ω</option>
                <option value="–í–∞—Ö—à">–í–∞—Ö—à</option>
                <option value="–í–æ—Å–µ—ä">–í–æ—Å–µ—ä</option>
                <option value="–î–∞–Ω“ì–∞—Ä–∞">–î–∞–Ω“ì–∞—Ä–∞</option>
                <option value="–Å–≤–æ–Ω">–Å–≤–æ–Ω</option>
                <option value="“ö–∞–±–æ–¥–∏—ë–Ω">“ö–∞–±–æ–¥–∏—ë–Ω</option>
                <option value="“ö—É–±–æ–¥–∏—ë–Ω">“ö—É–±–æ–¥–∏—ë–Ω</option>
                <option value="–ö”Ø—à–æ–Ω–∏—ë–Ω">–ö”Ø—à–æ–Ω–∏—ë–Ω</option>
                <option value="–õ–µ–≤–∞–∫–∞–Ω–¥">–õ–µ–≤–∞–∫–∞–Ω–¥</option>
                <option value="–ú–∏—Ä –°–∞–π–∏–¥ –ê–ª–∏–∏ “≤–∞–º–∞–¥–æ–Ω”£">–ú–∏—Ä –°–∞–π–∏–¥ –ê–ª–∏–∏ “≤–∞–º–∞–¥–æ–Ω”£</option>
                <option value="–ú”Ø—ä–º–∏–Ω–æ–±–æ–¥">–ú”Ø—ä–º–∏–Ω–æ–±–æ–¥</option>
                <option value="–ù–æ—Å–∏—Ä–∏ –•—É—Å—Ä–∞–≤">–ù–æ—Å–∏—Ä–∏ –•—É—Å—Ä–∞–≤</option>
                <option value="–ù–æ—Ä–∞–∫">–ù–æ—Ä–∞–∫</option>
                <option value="–ü–∞–Ω“∑">–ü–∞–Ω“∑</option>
                <option value="–†—É–º”£">–†—É–º”£</option>
                <option value="–¢–µ–º—É—Ä–º–∞–ª–∏–∫">–¢–µ–º—É—Ä–º–∞–ª–∏–∫</option>
                <option value="–§–∞—Ä—Ö–æ—Ä">–§–∞—Ä—Ö–æ—Ä</option>
                <option value="–•—É—Ä–æ—Å–æ–Ω">–•—É—Ä–æ—Å–æ–Ω</option>
                <option value="–®–∞–º—Å–∏–¥–¥–∏–Ω –®–æ“≥–∏–Ω">–®–∞–º—Å–∏–¥–¥–∏–Ω –®–æ“≥–∏–Ω</option>
        
                <!-- –ù–æ“≥–∏—è“≥–æ–∏ —Ç–æ–±–µ–∏ “∑—É–º“≥—É—Ä”£ -->
                <option value="–¢—É—Ä—Å—É–Ω–∑–æ–¥–∞">–¢—É—Ä—Å—É–Ω–∑–æ–¥–∞</option>
                <option value="–†–æ“ì—É–Ω">–†–æ“ì—É–Ω</option>
                <option value="–í–∞—Ä–∞–∑–æ–±">–í–∞—Ä–∞–∑–æ–±</option>
                <option value="–§–∞–π–∑–æ–±–æ–¥">–§–∞–π–∑–æ–±–æ–¥</option>
                <option value="–†–∞—à—Ç">–†–∞—à—Ç</option>
                <option value="–ù—É—Ä–æ–±–æ–¥">–ù—É—Ä–æ–±–æ–¥</option>
                <option value="–¢–æ“∑–∏–∫–æ–±–æ–¥">–¢–æ“∑–∏–∫–æ–±–æ–¥</option>
                <option value="–õ–∞—Ö—à">–õ–∞—Ö—à</option>
                <option value="–°–∞–Ω–≥–≤–æ—Ä">–°–∞–Ω–≥–≤–æ—Ä</option>
                <option value="“≤–∏—Å–æ—Ä">“≤–∏—Å–æ—Ä</option>
                <option value="–®–∞“≥—Ä–∏–Ω–∞–≤">–®–∞“≥—Ä–∏–Ω–∞–≤</option>
            </select>
        
            <input type="text" name="qidiruv" placeholder="–•–∏–∑–º–∞—Ç—Ä–æ “∑—É—Å—Ç—É“∑”Ø –∫—É–Ω..." value="{{ qidiruv }}">
            
        </form>
        
        
        <button id="mode-toggle">üåô/‚òÄÔ∏è</button> <!-- id qo‚Äòshildi -->
    </header>
    
    


    <main>
        <div class="category-type">
            <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</h2>
            <a href="{% url 'santexniklar'%}"><img src="{% static 'xizmatlar/images/OIP.jpg' %}" class="category-type-img"></a>
            <a href="{% url 'xasharchi'%}"><img src="{% static 'xizmatlar/images/10720359.png' %}" class="category-type-img"></a>
            <a href="{% url 'barqchi'%}"><img src="{% static 'xizmatlar/images/—ç–ª–µ–∫—Ç—Ä.jpg' %}" class="category-type-img"></a>
            <a href="{% url 'cleaner'%}"><img src="{% static 'xizmatlar/images/uborchik.webp' %}" class="category-type-img"></a>
            <a href="{% url 'qassob'%}"><img src="{% static 'xizmatlar/images/q–∞—Å—Å–æ–±.png' %}" class="category-type-img"></a>
            <a href="{% url 'skidka'%}"><img src="{% static 'xizmatlar/images/10_skidka.png'%}" class="skidka-img-style"></a>
        </div>
        {% if page_obj %}
        <ul class="service-list" style="width:250px; display: flex; margin-left: -250px;">
            {% for xizmat in page_obj %}
                <li class="service-card">
                    <a href="{% url 'service_detail' pk=xizmat.pk %}" class="service-link">
                    
                        {% if xizmat.rasm %}
                            <img src="{{ xizmat.rasm.url }}" alt="{{ xizmat.nomi }}" class="xizmat-image">

                         {% endif %}
            
                         <h2 style="display: flex; align-items: center; gap: 8px;">
                            {{ xizmat.nomi }}
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </h2>
                        <p class="xizmat-nohiya"><strong>–ù–æ“≥–∏—è:</strong> {{ xizmat.nohiya }}</p>
                        <p>{{ xizmat.tavsif }}</p>
                        <p><strong>–ù–∞—Ä—Ö:</strong> {{ xizmat.narx }} —Å–æ–º–æ–Ω”£</p>
                        
                        {% if xizmat.telefon %}
                            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ xizmat.telefon }}</p>
                        {% endif %}
                        <small>{{ xizmat.sana|date:"d.m.Y H:i" }}</small>
                    </a>
                        {% if request.user == xizmat.user %}
                        <form method="post" action="{% url 'delete_service' xizmat.id %}" class="delete-form" onsubmit="return confirmDelete()">
                            {% csrf_token %}
                            <button type="submit" class="delete-button">üóëÔ∏è –¢–æ–∑–∞ –∫–∞—Ä–¥–∞–Ω</button>
                        </form>
                        {% endif %}
                    
                        <button id="contact-btn-{{ xizmat.id }}" class="contact-button">–§–∞—Ä–º–æ–∏—à –¥–æ–¥–∞–Ω/–¢–∞–º–æ—Å</button>

                        <!-- Modal (Kontakt form) -->
                        <div id="contact-modal-{{ xizmat.id }}" class="modal">
                            <div class="modal-content">
                                <span class="close-btn" data-modal-id="{{ xizmat.id }}">&times;</span>
                                <h2>–¢–∞–º–æ—Å —à—É–¥–∞–Ω</h2>
                                <form method="post" action="{% url 'send_message' %}">
                                    {% csrf_token %}
                                    <input type="text" name="name" placeholder="–ù–æ–º–∏ —Ö—É–¥—Ä–æ –Ω–∞–≤–∏—Å–µ–¥..." required>
                                    <input type="tel" name="phone" placeholder="–†–∞“õ–∞–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω" required>
                                    <textarea name="message" class="contact-message" placeholder="–•–∞–±–∞—Ä—Ä–æ –¥–æ—Ö–∏–ª –∫—É–Ω–µ–¥..." required ></textarea>
                                    <button type="submit">–§–∏—Ä–∏—Å—Ç–æ–¥–∞–Ω</button>
                                </form>
                            </div>
                        </div>

                </li>
            {% endfor %}
        </ul>
        
        
        {% else %}
            <p class="p-xizmat">“≤–æ–ª–æ —è–≥–æ–Ω —Ö–∏–∑–º–∞—Ç –º–∞–≤“∑—É–¥ –Ω–µ—Å—Ç.</p>
            <img src="{% static 'xizmatlar/images/no-result.gif' %}" alt="–•–∏–∑–º–∞—Ç“≥–æ –Ω–µ—Å—Ç–∞–Ω–¥" style="max-width: 300px; margin: 0 auto; display: block;">
        {% endif %}


        <a href="{% url 'add_service' %}" class="add-button">‚ûï –•–∏–∑–º–∞—Ç –¥–æ—Ö–∏–ª –∫–∞—Ä–¥–∞–Ω</a>
    </main>

<script>

    document.addEventListener('DOMContentLoaded', function () {
    // Dark/Light mode toggle
    const modeToggleButton = document.getElementById('mode-toggle');
    const body = document.body;

    modeToggleButton.innerText = body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';

    modeToggleButton.addEventListener('click', function () {
        body.classList.toggle('dark-mode');
        body.classList.toggle('light-mode');
        modeToggleButton.innerText = body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
    });

    // Modal logic using event delegation
    document.body.addEventListener('click', function (event) {
        const target = event.target;

        // Open modal
        if (target.classList.contains('contact-button')) {
            const id = target.id.split('-')[2];
            const modal = document.getElementById(`contact-modal-${id}`);
            modal.style.display = 'flex';
        }

        // Close modal
        if (target.classList.contains('close-btn')) {
            const id = target.getAttribute('data-modal-id');
            const modal = document.getElementById(`contact-modal-${id}`);
            modal.style.display = 'none';
        }

        // Close modal when clicking outside
        if (target.classList.contains('modal')) {
            target.style.display = 'none';
        }
    });

    document.querySelector(".search-form").addEventListener("submit", function (e) {
    const district = document.querySelector('select[name="nohiya"]').value;
    if (!district) {
        alert("–ò–ª—Ç–∏–º–æ—Å, –Ω–æ“≥–∏—è—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥."); // Improved message
        e.preventDefault();
    }
    });
    function confirmDelete() {
    return confirm("–®—É–º–æ –±–æ–≤–∞—Ä”£ –¥–æ—Ä–µ–¥, –∫–∏ –∏–Ω —Ö–∏–∑–º–∞—Ç—Ä–æ —Ç–æ–∑–∞ –∫–∞—Ä–¥–∞–Ω –º–µ—Ö–æ“≥–µ–¥?");
}
});
</script>
    
    
        
</body>
</html>
